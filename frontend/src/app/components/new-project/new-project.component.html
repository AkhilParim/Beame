<div class="form-container">
  <div class="flex items-center mb-6">
    <h1 class="text-2xl font-bold">{{isTestMode ? 'API Test Mode' : 'Pre-design Report'}}</h1>
  </div>

  <div class="form-card">
    <h2 class="text-xl font-semibold mb-6">{{isTestMode ? 'Test API Query' : 'City of Houston - City Ordinance'}}</h2>

    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
      <div class="space-y-6">
        <ng-container *ngIf="!isTestMode">   <!-- not showing in test mode -->
          <div>
            <label class="form-label">Project Name</label>
            <input type="text" class="form-input" formControlName="projectName" 
                    placeholder="Enter project name">
          </div>

          <div>
            <label class="form-label">Project Description</label>
            <textarea class="form-input" formControlName="projectDescription" 
                      placeholder="Describe your project"></textarea>
          </div>
        </ng-container>

        <div class="form-grid">
          <div>
            <label class="form-label">Development Type</label>
            <select class="form-input" formControlName="developmentType">
              <option value="" disabled selected>Select development type</option>
              <option *ngFor="let type of developmentTypes" [value]="type">{{type}}</option>
            </select>
          </div>
          <div *ngIf="selectedClassTypes.length > 0">
            <label class="form-label">
              Type of {{projectForm.get('developmentType')?.value?.split(' - ')[0]}}
            </label>
            <select class="form-input" formControlName="classType">
              <option value="" disabled selected>Select {{projectForm.get('developmentType')?.value?.split(' - ')[0]}} type</option>
              <option *ngFor="let type of selectedClassTypes" [value]="type">{{type}}</option>
            </select>
          </div>
          <div>
            <label class="form-label">Development Status</label>
            <select class="form-input" formControlName="developmentStatus">
              <option value="" disabled selected>Select development status</option>
              <option *ngFor="let status of developmentStatuses" [value]="status">{{status}}</option>
            </select>
          </div>
        </div>

        <div class="form-grid">
          <div>
            <label class="form-label">Property Size (acres)</label>
            <input type="number" min="0" class="form-input" formControlName="propertySize" 
                    placeholder="Enter acres">
          </div>
          <div>
            <label class="form-label">Building Height (feet)</label>
            <input type="number" min="0" class="form-input" formControlName="buildingHeight" 
                    placeholder="Enter height in feet">
          </div>
        </div>

        <div>
          <label class="form-label">Number of Adjacent Streets</label>
          <select class="form-input" formControlName="numberOfStreets">
            <option [value]="0" disabled selected>Select Number of Adjacent Streets</option>
            <option *ngFor="let number of [1, 2, 3, 4]" [value]="number">
              {{number}} {{number === 1 ? 'Street' : 'Streets'}}
            </option>
          </select>
        </div>

        <!-- Adjacent Streets -->
        <div class="space-y-4" *ngIf="numberOfStreetsToShow > 0">
          <div *ngFor="let i of [].constructor(numberOfStreetsToShow); let index = index">
            <label class="form-label">Adjacent Street {{index + 1}}</label>
            <select class="form-input" [formControlName]="'adjacentStreet' + (index + 1)">
              <option value="" disabled selected>Select street {{index + 1}} type</option>
              <option *ngFor="let type of streetTypes" [value]="type">{{type}}</option>
            </select>
          </div>
        </div>

        <div>
          <label class="form-label">Floodplain</label>
          <select class="form-input" formControlName="floodplainZone">
            <option value="" disabled selected>Select floodplain zone</option>
            <option *ngFor="let zone of floodplainZones" [value]="zone">{{zone}}</option>
          </select>
        </div>

        <div *ngIf="isTestMode">
          <label class="form-label">Test Query</label>
          <textarea class="form-input min-h-[100px]" formControlName="testQuery" 
                    placeholder="Enter your test query"></textarea>
        </div>

        <button type="submit" class="form-button">
          {{isTestMode ? 'Test Query' : 'Generate Report'}}
        </button>
      </div>
    </form>
  </div>
</div>
