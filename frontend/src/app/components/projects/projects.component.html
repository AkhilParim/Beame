<div class="projects-container">
  <div class="header">
    <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-4">
            <!-- <button class="back-btn">
              <span>‚Üê</span>
              Back
            </button> -->
            <h1>My Projects</h1>
        </div>
    </div>
    <div class="actions">
      <button class="action-btn" [disabled]="!selectedProject" (click)="viewReport()">
        <!-- <span class="icon">+</span> -->
        View Report <!-- TODO: add icon -->
      </button>
      <button class="action-btn" [disabled]="!selectedProject" (click)="addDesignConstraints()">
        <!-- <span class="icon">+</span> -->
        Edit Design Constraints <!-- TODO: add icon -->
      </button>
    </div>
  </div>

  @if (projects.length > 0) {
    <div class="text-gray-500 my-4 flex-none">
      Select a project to view reports or edit design constraints
    </div>

    <div class="projects-grid-container">
      <div class="projects-grid">
        @for (projectItem of projects; track projectItem.id;) {
          <div 
            class="project-card" 
            [class.selected]="selectedProject?.id === projectItem.id"
            (click)="selectProject(projectItem)"
          >
            <div class="project-header">
              <h2>{{ projectItem.project.projectName }}</h2>
              <button class="delete-btn text-gray-400">delete</button>
            </div>
            <p class="description">{{ projectItem.project.projectDescription }}</p>
            <div class="tags">
              <span class="tag">{{ projectItem.project.developmentType.split('-')[0] }}</span>
              <span class="tag">{{ projectItem.project.classType }}</span>
            </div>
          </div>
        }
      </div>
    </div>
  } @else {
    <div class="flex flex-col items-center justify-center py-16">
      <p class="text-gray-500 mb-4 text-lg">No projects yet</p>
      <button class="create-project-btn" (click)="createProject()">
        Create Your First Project
      </button>
    </div>
  }

  <div class="flex-none">
    @if (projects.length > 0) {
      <button class="create-project-btn persistent-btn" (click)="createProject()">
        <span class="icon">+</span>
        Create Project
      </button>
    }
  </div>

  @if (showDesignConstraints) {
    <app-design-constraints 
      [designConstraints]="selectedProject?.designConstraints"
      [isProjectsPage]="true"
      (close)="onDesignConstraintsClose()" 
      (save)="onDesignConstraintsSave($event)" />
  }
</div> 